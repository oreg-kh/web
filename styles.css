:root {
  color-scheme: light dark;
  --bg: #f3f4f6;
  --main: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --line: #e5e7eb;
  --dark: #0f1218;
  --dark-soft: #171c24;
  --dark-line: #2a3240;
  --blue-soft: rgba(74, 169, 255, 0.65);
  --blue-hover: rgba(39, 120, 255, 0.85);
  --gray-soft: rgba(180, 187, 196, 0.45);
}
:root[data-theme="dark"] {
  --bg: #0b0f16;
  --main: #0f141c;
  --text: #e7eaf0;
  --muted: #a3adbc;
  --line: #273143;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--text);overflow:hidden}
.app-shell{display:grid;grid-template-columns:360px 1fr;height:100vh}
.app-shell.sidebar-collapsed{grid-template-columns:88px 1fr}

.sidebar-shell{position:relative;display:grid;grid-template-columns:88px 1fr;height:100vh;background:linear-gradient(180deg,var(--dark),#0b1018);border-right:1px solid var(--dark-line)}
.icon-rail{border-right:1px solid var(--dark-line);padding:18px 10px;display:flex;flex-direction:column;align-items:center;gap:12px}
.rail-item{width:48px;height:48px;border:1px solid transparent;border-radius:12px;background:transparent;color:#aab4c5;display:grid;place-items:center;cursor:pointer}
.rail-item.active,.rail-item:hover{background:#1e2430;border-color:#3a4353;color:#fff}
.rail-item svg{width:22px;height:22px;stroke:currentColor;fill:none;stroke-width:2.1;stroke-linecap:round;stroke-linejoin:round}
.sidebar-panel{display:flex;flex-direction:column;overflow:hidden;min-height:0}
.sidebar-header{min-height:73px;display:flex;align-items:center;gap:10px;padding:0 14px;border-bottom:1px solid var(--dark-line);white-space:nowrap}
.brand-avatar{width:40px;height:40px;border-radius:50%;flex:0 0 40px;object-fit:cover;box-shadow:0 0 0 1px rgba(255,255,255,.25)}
.sidebar-title{font-size:18px;font-weight:700;color:#fff;margin:0;white-space:nowrap;max-width:none}
.sidebar-collapse-toggle{margin-left:auto;width:28px;height:28px;border-radius:8px;border:1px solid #505763;background:#2b3038;color:#9da4af;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;padding:0;flex:0 0 28px}
.sidebar-collapse-toggle svg{width:14px;height:14px;display:block;stroke:currentColor;fill:none;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round}
.sidebar-collapse-toggle-collapsed{position:absolute;top:25px;left:calc(88px - 14px);z-index:6;display:none}
.sidebar-nav{padding:12px 14px 16px;flex:1;min-height:0;overflow:auto}
.sidebar-nav .nav-group{margin-bottom:8px;border-radius:10px;overflow:hidden}
.nav-main{width:100%;display:flex;justify-content:space-between;align-items:center;border:none;background:transparent;color:#d3d8e2;padding:11px 10px;cursor:pointer}
.nav-main-left{display:flex;gap:10px;align-items:center}
.nav-main .btn-icon svg,.sub-item svg{stroke:currentColor;fill:none}
.nav-group.open .nav-main,.nav-main:hover{background:#2b313c;color:#fff}
.submenu{display:none;padding:8px 6px 10px 34px}
.nav-group.open .submenu{display:block}
.sub-item,.cmd-option{width:100%;text-align:left;border:none;background:transparent;color:#aeb7c7;padding:7px 8px;border-radius:8px;cursor:pointer}

.sub-toggle{display:flex;justify-content:space-between;align-items:center}
.toggle-icon,.lang-arrow{display:inline-flex;align-items:center;justify-content:center;width:14px;height:14px;flex:0 0 14px}
.toggle-icon svg,.lang-arrow svg{width:12px;height:12px;stroke:currentColor;fill:none;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round;transition:transform .2s ease}
.sub-toggle.open .toggle-icon svg{transform:rotate(180deg)}
.sub-item:hover,.cmd-option:hover,.sub-item.active,.cmd-option.active{background:#1f2632;color:#fff}
.command-list{margin-left:8px;border-left:1px solid #2b3444;padding-left:8px}
.cmd-option{display:flex;align-items:center;gap:8px}
.cmd-option .btn-icon{display:inline-flex}

.main-shell{display:flex;flex-direction:column;min-width:0;overflow:hidden}
.topbar{min-height:73px;display:flex;justify-content:flex-end;align-items:center;gap:10px;padding:10px 18px;border-bottom:1px solid var(--line);background:var(--main)}
.crumbs{display:none}
.topbar-actions{display:flex;align-items:center;gap:8px;flex-wrap:wrap;justify-content:flex-start;width:100%}
.bmc-inline-mount{display:flex;align-items:center;min-height:42px}
.bmc-inline-mount img{display:block;height:40px;width:auto;border-radius:8px}
.bmc-icon{display:none;width:42px;height:42px;border:1px solid #e2b800;border-radius:10px;background:#ffdd00;align-items:center;justify-content:center}
.bmc-icon svg{width:20px;height:20px;display:block}
.progress-wrap{min-width:180px;height:42px;padding:5px 9px;border:1px solid var(--line);border-radius:9px;background:var(--bg)}
.topbar-actions .progress-wrap{margin-right:auto}
.progress-meta{display:flex;justify-content:space-between;font-size:11px;margin-bottom:5px}
.progress-track{height:7px;background:#c4ccd8;border-radius:999px;overflow:hidden}
.progress-fill{height:100%;width:0;background:linear-gradient(90deg,#ffb703,#fb8500)}
.bmac-widget{text-decoration:none;color:#2a1f10;background:#ffdd7e;border:1px solid #f2bf2e;padding:8px 10px;border-radius:9px;font-weight:600}
.btn{display:inline-flex;align-items:center;gap:8px;border-radius:10px;border:1px solid rgba(255,255,255,.25);padding:8px 11px;height:42px;text-decoration:none;color:#fff}
.btn-discord{background:var(--blue-soft)} .btn-discord:hover{background:var(--blue-hover)} .btn-support{background:var(--gray-soft)}
.btn-icon svg{width:18px;height:18px;display:block}
.flag-img{width:22px;height:16px;display:block;border-radius:2px;object-fit:cover;box-shadow:0 0 0 1px rgba(0,0,0,.18)}
.language-picker{position:relative}
.language-current{display:flex;align-items:center;gap:8px;height:42px;background:var(--bg);border:1px solid var(--line);color:var(--text);border-radius:8px;padding:7px 8px;cursor:pointer}
.language-picker.open .lang-arrow svg{transform:rotate(180deg)}
.language-menu{display:none;position:absolute;right:0;top:calc(100% + 6px);z-index:50;width:max-content;max-width:min(92vw,360px);max-height:none;overflow:visible;background:var(--main);border:1px solid var(--line);border-radius:10px}
.language-picker.open .language-menu{display:block}
.language-item{width:100%;display:flex;gap:8px;align-items:center;padding:7px 10px;background:transparent;border:none;color:var(--text);cursor:pointer;white-space:nowrap}
.language-item:hover{background:var(--bg)}

.content{padding:20px;overflow:auto}
.card{background:var(--main);border:1px solid var(--line);border-radius:14px;padding:18px}
h1{margin:0 0 10px}
.table-wrap{overflow:auto;border:1px solid var(--line);border-radius:10px}
table{width:100%;border-collapse:collapse;min-width:520px}
th,td{padding:10px;border-bottom:1px solid var(--line);text-align:left}
.figure{margin-top:14px;border:1px dashed var(--line);border-radius:10px;padding:10px}
.figure img{width:100%;max-height:350px;object-fit:contain;background:var(--bg)}
.list-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:10px}


@media (max-width: 1024px){
  .topbar-actions{gap:6px;flex-wrap:nowrap;padding-bottom:2px;justify-content:flex-end}
  .topbar-actions .progress-wrap{margin-right:0;position:fixed;bottom:12px;left:calc(70px + ((100vw - 70px) / 2));transform:translateX(-50%);z-index:40;width:min(340px,calc(100vw - 94px));min-width:220px;height:auto;padding:7px 10px;display:block}
  .btn{width:42px;min-width:42px;padding:0;justify-content:center}
  .btn > span:not(.btn-icon){display:none}
  .language-current{width:42px;min-width:42px;padding:0;justify-content:center}
  .language-current .lang-arrow,.language-current span:nth-child(2){display:none}
  .progress-meta,.progress-track{display:flex}
  .progress-track{display:block}
  .progress-wrap::before{content:none}
  .bmc-inline-mount{order:2}
  #discordAddBtn{order:3}
  #supportBtn{order:4}
  .language-picker{order:5}
  .bmc-inline-mount img{display:none}
  .bmc-icon{display:inline-flex}
  .content{padding-bottom:90px}
}

@media (max-width: 768px){
  .topbar{padding:8px 10px;gap:6px}
}
@media (max-width: 1100px){
  .app-shell,.app-shell.sidebar-collapsed{grid-template-columns:1fr;height:100vh}
  .sidebar-shell{grid-template-columns:70px 1fr;position:absolute;top:0;left:0;bottom:0;z-index:20;width:min(360px,92vw);height:100vh;background:#0f1218;backdrop-filter:none}
  .sidebar-collapse-toggle-collapsed{left:calc(70px - 8px);top:22px;z-index:45}
  .icon-rail{background:#0f1218}
  .sidebar-panel{background:#0f1218}
  .sidebar-header{background:#0f1218}
  .sidebar-shell.submenus-hidden{width:70px !important;max-width:70px;background:#0f1218;grid-template-columns:70px 0 !important;overflow:visible;z-index:8}
  .main-shell{position:relative;z-index:3;margin-left:70px;width:calc(100% - 70px)}
  .sidebar-title{font-size:16px}
  .crumbs{font-size:18px}
}


@media (max-width: 1100px){
  body{overflow-y:auto;overflow-x:hidden}
  .app-shell{height:auto;min-height:100vh}
  .main-shell{overflow:visible}
  .content{overflow:visible}
}

:root[data-theme="light"] .sidebar-shell{background:#fff;border-right:1px solid var(--line)}
:root[data-theme="light"] .icon-rail{border-right:1px solid var(--line)}
:root[data-theme="light"] .sidebar-header{border-bottom:1px solid var(--line)}
:root[data-theme="light"] .sidebar-title{color:#111827}
:root[data-theme="light"] .nav-main{color:#4b5563}
:root[data-theme="light"] .nav-group.open .nav-main,:root[data-theme="light"] .nav-main:hover{background:#f3f4f6;color:#111827}
:root[data-theme="light"] .sub-item,:root[data-theme="light"] .cmd-option{color:#6b7280}
:root[data-theme="light"] .sub-item:hover,:root[data-theme="light"] .cmd-option:hover,:root[data-theme="light"] .sub-item.active,:root[data-theme="light"] .cmd-option.active{background:#eef2f7;color:#111827}
:root[data-theme="light"] .command-list{border-left:1px solid #d1d5db}

.sidebar-nav{scrollbar-width:thin;scrollbar-color:#4b5563 transparent}
.sidebar-nav::-webkit-scrollbar{width:6px}
.sidebar-nav::-webkit-scrollbar-track{background:transparent}
.sidebar-nav::-webkit-scrollbar-thumb{background:#4b5563;border-radius:99px}
:root[data-theme="light"] .sidebar-nav{scrollbar-color:#c3ccd8 transparent}
:root[data-theme="light"] .sidebar-nav::-webkit-scrollbar-thumb{background:#c3ccd8}

:root[data-theme="light"] .brand-avatar{box-shadow:0 0 0 1px rgba(0,0,0,.2)}

@media (max-width: 1100px){
  :root[data-theme="light"] .sidebar-shell{background:#ffffff}
  :root[data-theme="light"] .icon-rail{background:#ffffff}
  :root[data-theme="light"] .sidebar-panel{background:#ffffff}
  :root[data-theme="light"] .sidebar-header{background:#ffffff}
  :root[data-theme="light"] .sidebar-shell.submenus-hidden{background:#ffffff;max-width:70px}
}

.sidebar-shell.submenus-hidden .sidebar-panel{display:none}
.sidebar-shell.submenus-hidden #sidebarToggleCollapsed{display:inline-flex}
:root[data-theme="light"] .sidebar-collapse-toggle{background:#f3f4f6;border-color:#d1d5db;color:#4b5563}
